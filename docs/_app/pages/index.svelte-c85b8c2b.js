var Ve=Object.defineProperty,Xe=Object.defineProperties;var Ye=Object.getOwnPropertyDescriptors;var ge=Object.getOwnPropertySymbols;var Je=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable;var ye=(n,e,t)=>e in n?Ve(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,he=(n,e)=>{for(var t in e||(e={}))Je.call(e,t)&&ye(n,t,e[t]);if(ge)for(var t of ge(e))Qe.call(e,t)&&ye(n,t,e[t]);return n},be=(n,e)=>Xe(n,Ye(e));import{S as V,i as X,s as B,e as g,J as Ze,c as y,d as p,b as d,D as m,E as D,t as te,k as K,a as M,g as ne,n as O,f as S,h as le,K as oe,L as fe,M as Y,N as pe,O as $e,P as et,Q as me,R as we,T as tt,l as ie,r as ce,u as P,w as de,U as ke,V as xe,x as R,W as ve,X as ze,Y as Ae,Z as Ee,p as nt,_ as at,B as rt,$ as ae,a0 as Te,j as J,m as Q,o as Z,v as $,a1 as st,a2 as it,a3 as lt,a4 as ot,y as Me,a5 as ct,C as dt,a6 as ut,a7 as ht,a8 as ft}from"../chunks/vendor-16d35230.js";import{b as pt}from"../chunks/paths-28a87002.js";function mt(n){let e,t,r,i,a,s,o,l,h,c,u,f,v,E,T,I,b,_,A,z,w,L,N,ee,re,F,U,G,C,j;return document.title=e=n[0],{c(){t=g("meta"),r=g("meta"),i=g("meta"),a=g("meta"),s=g("meta"),o=g("meta"),l=g("meta"),h=g("meta"),c=g("meta"),u=g("meta"),f=g("meta"),v=g("meta"),E=g("meta"),I=g("meta"),b=g("meta"),_=g("meta"),A=g("meta"),z=g("meta"),w=g("meta"),L=g("meta"),N=g("meta"),ee=g("meta"),F=g("meta"),U=g("link"),C=g("link"),j=g("link"),this.h()},l(W){const k=Ze('[data-svelte="svelte-ws136d"]',document.head);t=y(k,"META",{charset:!0}),r=y(k,"META",{name:!0,content:!0}),i=y(k,"META",{"http-equiv":!0,content:!0}),a=y(k,"META",{name:!0,content:!0}),s=y(k,"META",{name:!0,content:!0}),o=y(k,"META",{name:!0,content:!0}),l=y(k,"META",{property:!0,content:!0}),h=y(k,"META",{property:!0,content:!0}),c=y(k,"META",{property:!0,content:!0}),u=y(k,"META",{property:!0,content:!0}),f=y(k,"META",{property:!0,content:!0}),v=y(k,"META",{property:!0,content:!0}),E=y(k,"META",{property:!0,content:!0}),I=y(k,"META",{property:!0,content:!0}),b=y(k,"META",{property:!0,content:!0}),_=y(k,"META",{property:!0,content:!0}),A=y(k,"META",{name:!0,content:!0}),z=y(k,"META",{name:!0,content:!0}),w=y(k,"META",{name:!0,content:!0}),L=y(k,"META",{name:!0,content:!0}),N=y(k,"META",{name:!0,content:!0}),ee=y(k,"META",{name:!0,content:!0}),F=y(k,"META",{name:!0,content:!0}),U=y(k,"LINK",{rel:!0,href:!0}),C=y(k,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),j=y(k,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),k.forEach(p),this.h()},h(){d(t,"charset","utf-8"),d(r,"name","viewport"),d(r,"content","width=device-width, initial-scale=1.0"),d(i,"http-equiv","Content-Type"),d(i,"content","text/html; charset=utf-8"),d(a,"name","description"),d(a,"content",n[1]),d(s,"name","author"),d(s,"content","The Pudding"),d(o,"name","news_keywords"),d(o,"content",""),d(l,"property","og:title"),d(l,"content",n[0]),d(h,"property","og:site_name"),d(h,"content","The Pudding"),d(c,"property","og:url"),d(c,"content",n[2]),d(u,"property","og:description"),d(u,"content",n[1]),d(f,"property","og:type"),d(f,"content","article"),d(v,"property","og:locale"),d(v,"content","en_US"),d(E,"property","og:image"),d(E,"content",T=""+(n[2]+"/assets/social-facebook.jpg")),d(I,"property","og:image:type"),d(I,"content","image/jpeg"),d(b,"property","og:image:width"),d(b,"content","1200"),d(_,"property","og:image:height"),d(_,"content","600"),d(A,"name","twitter:card"),d(A,"content","summary_large_image"),d(z,"name","twitter:site"),d(z,"content","https://pudding.cool"),d(w,"name","twitter:creator"),d(w,"content","@puddingviz"),d(L,"name","twitter:title"),d(L,"content",n[0]),d(N,"name","twitter:description"),d(N,"content",n[1]),d(ee,"name","twitter:image:src"),d(ee,"content",re=""+(n[2]+"/assets/social-twitter.jpg")),d(F,"name","robots"),d(F,"content","max-image-preview:large"),d(U,"rel","canonical"),d(U,"href",G=""+(n[2]+"/")),d(C,"rel","preload"),d(C,"href","https://pudding.cool/assets/fonts/atkinson/atkinson-hyperlegible-v1-latin-400.woff2"),d(C,"as","font"),d(C,"type","font/woff2"),d(C,"crossorigin",""),d(j,"rel","preload"),d(j,"href","https://pudding.cool/assets/fonts/atkinson/atkinson-hyperlegible-v1-latin-700.woff2"),d(j,"as","font"),d(j,"type","font/woff2"),d(j,"crossorigin","")},m(W,k){m(document.head,t),m(document.head,r),m(document.head,i),m(document.head,a),m(document.head,s),m(document.head,o),m(document.head,l),m(document.head,h),m(document.head,c),m(document.head,u),m(document.head,f),m(document.head,v),m(document.head,E),m(document.head,I),m(document.head,b),m(document.head,_),m(document.head,A),m(document.head,z),m(document.head,w),m(document.head,L),m(document.head,N),m(document.head,ee),m(document.head,F),m(document.head,U),m(document.head,C),m(document.head,j)},p(W,[k]){k&1&&e!==(e=W[0])&&(document.title=e),k&2&&d(a,"content",W[1]),k&1&&d(l,"content",W[0]),k&4&&d(c,"content",W[2]),k&2&&d(u,"content",W[1]),k&4&&T!==(T=""+(W[2]+"/assets/social-facebook.jpg"))&&d(E,"content",T),k&1&&d(L,"content",W[0]),k&2&&d(N,"content",W[1]),k&4&&re!==(re=""+(W[2]+"/assets/social-twitter.jpg"))&&d(ee,"content",re),k&4&&G!==(G=""+(W[2]+"/"))&&d(U,"href",G)},i:D,o:D,d(W){p(t),p(r),p(i),p(a),p(s),p(o),p(l),p(h),p(c),p(u),p(f),p(v),p(E),p(I),p(b),p(_),p(A),p(z),p(w),p(L),p(N),p(ee),p(F),p(U),p(C),p(j)}}}function _t(n,e,t){let{title:r="Title TK"}=e,{description:i="Description TK"}=e,{url:a="https://pudding.cool"}=e;return n.$$set=s=>{"title"in s&&t(0,r=s.title),"description"in s&&t(1,i=s.description),"url"in s&&t(2,a=s.url)},[r,i,a]}class gt extends V{constructor(e){super();X(this,e,_t,mt,B,{title:0,description:1,url:2})}}function Se(n){let e,t=n[2][0]+"",r,i,a,s=n[2][1]+"",o;return{c(){e=g("span"),r=te(t),i=K(),a=g("span"),o=te(s),this.h()},l(l){e=y(l,"SPAN",{class:!0});var h=M(e);r=ne(h,t),h.forEach(p),i=O(l),a=y(l,"SPAN",{class:!0});var c=M(a);o=ne(c,s),c.forEach(p),this.h()},h(){d(e,"class","svelte-1squhu7"),d(a,"class","svelte-1squhu7")},m(l,h){S(l,e,h),m(e,r),S(l,i,h),S(l,a,h),m(a,o)},p(l,h){h&4&&t!==(t=l[2][0]+"")&&le(r,t),h&4&&s!==(s=l[2][1]+"")&&le(o,s)},d(l){l&&p(e),l&&p(i),l&&p(a)}}}function yt(n){let e,t,r,i,a,s,o,l,h=n[1]==="inner"&&Se(n);return{c(){e=g("div"),t=g("span"),r=te(n[0]),i=K(),a=g("button"),h&&h.c(),this.h()},l(c){e=y(c,"DIV",{class:!0});var u=M(e);t=y(u,"SPAN",{class:!0,id:!0});var f=M(t);r=ne(f,n[0]),f.forEach(p),i=O(u),a=y(u,"BUTTON",{role:!0,"aria-checked":!0,"aria-labelledby":!0,class:!0});var v=M(a);h&&h.l(v),v.forEach(p),u.forEach(p),this.h()},h(){d(t,"class","label svelte-1squhu7"),d(t,"id",n[4]),d(a,"role","switch"),d(a,"aria-checked",n[3]),d(a,"aria-labelledby",n[4]),d(a,"class","svelte-1squhu7"),d(e,"class",s="toggle toggle--"+n[1]+" svelte-1squhu7")},m(c,u){S(c,e,u),m(e,t),m(t,r),m(e,i),m(e,a),h&&h.m(a,null),o||(l=oe(a,"click",n[5]),o=!0)},p(c,[u]){u&1&&le(r,c[0]),c[1]==="inner"?h?h.p(c,u):(h=Se(c),h.c(),h.m(a,null)):h&&(h.d(1),h=null),u&8&&d(a,"aria-checked",c[3]),u&2&&s!==(s="toggle toggle--"+c[1]+" svelte-1squhu7")&&d(e,"class",s)},i:D,o:D,d(c){c&&p(e),h&&h.d(),o=!1,l()}}}function bt(n,e,t){let{label:r}=e,{style:i="inner"}=e,{options:a=["on","off"]}=e,{value:s=a[0]}=e,o=s===a[0];const l=`toggle-${Math.floor(Math.random()*1e6)}`,h=c=>{const f=c.target.getAttribute("aria-checked");t(3,o=f!=="true"),t(6,s=o?a[0]:a[1])};return n.$$set=c=>{"label"in c&&t(0,r=c.label),"style"in c&&t(1,i=c.style),"options"in c&&t(2,a=c.options),"value"in c&&t(6,s=c.value)},[r,i,a,o,l,h,s]}class wt extends V{constructor(e){super();X(this,e,bt,yt,B,{label:0,style:1,options:2,value:6})}}function Ie(n,e,t){const r=n.slice();return r[2]=e[t].scene,r[3]=e[t].setting,r[4]=e[t].beats,r}function Re(n,e,t){const r=n.slice();return r[7]=e[t].text,r[8]=e[t].alt,r[9]=e[t].deep,r}function kt(n){let e,t=n[7]+"";return{c(){e=g("p"),this.h()},l(r){e=y(r,"P",{class:!0});var i=M(e);i.forEach(p),this.h()},h(){d(e,"class","svelte-1un3nw3")},m(r,i){S(r,e,i),e.innerHTML=t},p:D,d(r){r&&p(e)}}}function xt(n){let e,t=n[8]+"";return{c(){e=g("p"),this.h()},l(r){e=y(r,"P",{class:!0});var i=M(e);i.forEach(p),this.h()},h(){d(e,"class","svelte-1un3nw3")},m(r,i){S(r,e,i),e.innerHTML=t},p:D,d(r){r&&p(e)}}}function vt(n){let e,t,r,i,a,s=n[9]+"",o;return{c(){e=g("details"),t=g("summary"),r=te("More Info"),i=K(),a=g("p"),o=te(s),this.h()},l(l){e=y(l,"DETAILS",{});var h=M(e);t=y(h,"SUMMARY",{});var c=M(t);r=ne(c,"More Info"),c.forEach(p),i=O(h),a=y(h,"P",{class:!0});var u=M(a);o=ne(u,s),u.forEach(p),h.forEach(p),this.h()},h(){d(a,"class","svelte-1un3nw3")},m(l,h){S(l,e,h),m(e,t),m(t,r),m(e,i),m(e,a),m(a,o)},p:D,d(l){l&&p(e)}}}function De(n){let e,t;function r(o,l){return o[8]?xt:kt}let a=r(n)(n),s=n[9]&&vt(n);return{c(){e=g("div"),a.c(),t=K(),s&&s.c(),this.h()},l(o){e=y(o,"DIV",{class:!0});var l=M(e);a.l(l),t=O(l),s&&s.l(l),l.forEach(p),this.h()},h(){d(e,"class","beat svelte-1un3nw3")},m(o,l){S(o,e,l),a.m(e,null),m(e,t),s&&s.m(e,null)},p(o,l){a.p(o,l),o[9]&&s.p(o,l)},d(o){o&&p(e),a.d(),s&&s.d()}}}function Pe(n){let e,t,r,i=n[4].filter(Le),a=[];for(let s=0;s<i.length;s+=1)a[s]=De(Re(n,i,s));return{c(){e=g("section");for(let s=0;s<a.length;s+=1)a[s].c();t=K(),this.h()},l(s){e=y(s,"SECTION",{id:!0,class:!0});var o=M(e);for(let l=0;l<a.length;l+=1)a[l].l(o);t=O(o),o.forEach(p),this.h()},h(){d(e,"id",r=n[2]),d(e,"class","svelte-1un3nw3")},m(s,o){S(s,e,o);for(let l=0;l<a.length;l+=1)a[l].m(e,null);m(e,t)},p(s,o){if(o&2){i=s[4].filter(Le);let l;for(l=0;l<i.length;l+=1){const h=Re(s,i,l);a[l]?a[l].p(h,o):(a[l]=De(h),a[l].c(),a[l].m(e,t))}for(;l<a.length;l+=1)a[l].d(1);a.length=i.length}},d(s){s&&p(e),fe(a,s)}}}function zt(n){let e,t=n[1].scenes,r=[];for(let i=0;i<t.length;i+=1)r[i]=Pe(Ie(n,t,i));return{c(){e=g("article");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=y(i,"ARTICLE",{class:!0});var a=M(e);for(let s=0;s<r.length;s+=1)r[s].l(a);a.forEach(p),this.h()},h(){d(e,"class","svelte-1un3nw3"),Y(e,"visible",n[0])},m(i,a){S(i,e,a);for(let s=0;s<r.length;s+=1)r[s].m(e,null)},p(i,[a]){if(a&2){t=i[1].scenes;let s;for(s=0;s<t.length;s+=1){const o=Ie(i,t,s);r[s]?r[s].p(o,a):(r[s]=Pe(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=t.length}a&1&&Y(e,"visible",i[0])},i:D,o:D,d(i){i&&p(e),fe(r,i)}}}const Le=n=>!n.hide;function At(n,e,t){const{copy:r}=pe("App");let{visible:i}=e;return n.$$set=a=>{"visible"in a&&t(0,i=a.visible)},[i,r]}class Et extends V{constructor(e){super();X(this,e,At,zt,B,{visible:0})}}var Tt=$e({width:0,height:0},n=>{const e=()=>n({width:window.innerWidth,height:window.innerHeight});return e(),window.addEventListener("resize",et(e,250)),()=>{window.removeEventListener("resize",e)}});function Mt(n,...e){const t=n(...e);let r,i;return{promise:new Promise((s,o)=>{i=()=>{r=!0,o({reason:"cancelled"})},l();function l(u){if(!r){let f;try{f=t.next(u)}catch(v){return o(v)}return c(f),null}}function h(u){var f;try{f=t.throw(u)}catch(v){return o(v)}c(f)}function c({done:u,value:f}){return u?s(f):f.then(l,h)}}),cancel:i}}function St(n){let e;return{c(){e=g("div"),this.h()},l(t){e=y(t,"DIV",{style:!0,class:!0}),M(e).forEach(p),this.h()},h(){d(e,"style",n[1]),d(e,"class","svelte-fjke0q")},m(t,r){S(t,e,r)},p(t,r){r[0]&2&&d(e,"style",t[1])},i:D,o:D,d(t){t&&p(e)}}}const It=100;function Rt(n,e,t){let r,i,a,s,o,l,h,c,u,f,v,E,T,I=D,b=()=>(I(),I=tt(F,x=>t(20,T=x)),F);n.$$.on_destroy.push(()=>I());let{name:_}=e,{steps:A}=e,{data:z}=e,{id:w}=e;const{scale:L,BASE:N}=pe("Game");me(n,L,x=>t(19,E=x));const re=`--src: url(${`${pt}/assets/sprites/${_}.png`});`;let F=we(0);b();let U,G=0,C,j;const W=x=>new Promise(q=>{setTimeout(q,x)}),k=(x,q)=>Object.keys(x).filter(H=>H.includes(q)).reduce((H,se)=>(H[se.replace(q,"")]=x[se]||0,H),{}),He=async x=>{const q=k(x,"start_"),H=k(x,"end_"),{duration:se}=x;b(t(0,F=we(q,{duration:se}))),await F.set(H)},Ke=x=>{const q=k(x,"start_");F.set(q,{duration:0})},Oe=x=>{const q=z.frames.filter(se=>se.name===x.cycle);if(Ke(x),!q.length){t(7,G=0);return}t(7,G=q[0].index);let H=0;U=setInterval(()=>{H+=1,H>=q.length&&(x.once?(H-=1,clearInterval(U)):H=0),t(7,G=q[H].index)},It)};function*Be(){for(let x of A)x.delay&&(yield W(x.delay)),U&&clearInterval(U),t(8,C=x.flip),t(9,j=x.z),Oe(x),x.duration&&(yield He(x)),x.loop&&A.push(he({},x))}const Ge=()=>{r&&r();const{promise:x,cancel:q}=Mt(Be);return x.then(()=>{}).catch(()=>{}),q};return n.$$set=x=>{"name"in x&&t(3,_=x.name),"steps"in x&&t(4,A=x.steps),"data"in x&&t(5,z=x.data),"id"in x&&t(6,w=x.id)},n.$$.update=()=>{n.$$.dirty[0]&64&&(r=Ge()),n.$$.dirty[0]&160&&t(14,i=z.frames.find(x=>x.index===G)),n.$$.dirty[0]&1572864&&t(18,a=`${Math.round(T.x*E*N)}px`),n.$$.dirty[0]&1572864&&t(17,s=`${Math.round(T.y*E*N*-1)}px`),n.$$.dirty[0]&1572864&&t(16,o=`${T.r*E}deg`),n.$$.dirty[0]&256&&t(15,l=C?-1:1),n.$$.dirty[0]&491520&&t(11,h=`--transform: translate(${a}, ${s}) rotate(${o}) scaleX(${l});`),n.$$.dirty[0]&540672&&t(12,c=`--pos: ${E*i.x*-1}px ${E*i.y*-1};`),n.$$.dirty[0]&524320&&t(13,u=`--size: ${z.size*E}px;`),n.$$.dirty[0]&512&&t(10,f=`--z-index: ${j||0};`),n.$$.dirty[0]&15360&&t(1,v=`${re} ${u} ${c} ${h} ${f}`)},[F,v,L,_,A,z,w,G,C,j,f,h,c,u,i,l,o,s,a,E,T]}class Dt extends V{constructor(e){super();X(this,e,Rt,St,B,{name:3,steps:4,data:5,id:6},null,[-1,-1])}}function We(n){let e,t,r,i;return{c(){e=g("div"),t=g("p"),this.h()},l(a){e=y(a,"DIV",{class:!0});var s=M(e);t=y(s,"P",{class:!0});var o=M(t);o.forEach(p),s.forEach(p),this.h()},h(){d(t,"class","svelte-zjw6r4"),d(e,"class","svelte-zjw6r4")},m(a,s){S(a,e,s),m(e,t),t.innerHTML=n[0],i=!0},p(a,s){(!i||s&1)&&(t.innerHTML=a[0])},i(a){i||(ke(()=>{r||(r=xe(e,ve,{},!0)),r.run(1)}),i=!0)},o(a){r||(r=xe(e,ve,{},!1)),r.run(0),i=!1},d(a){a&&p(e),a&&r&&r.end()}}}function Pt(n){let e=n[0],t,r,i=We(n);return{c(){i.c(),t=ie()},l(a){i.l(a),t=ie()},m(a,s){i.m(a,s),S(a,t,s),r=!0},p(a,[s]){s&1&&B(e,e=a[0])?(ce(),P(i,1,1,D),de(),i=We(a),i.c(),R(i),i.m(t.parentNode,t)):i.p(a,s)},i(a){r||(R(i),r=!0)},o(a){P(i),r=!1},d(a){a&&p(t),i.d(a)}}}function Lt(n,e,t){let{text:r}=e,{deep:i}=e;return n.$$set=a=>{"text"in a&&t(0,r=a.text),"deep"in a&&t(1,i=a.deep)},[r,i]}class Wt extends V{constructor(e){super();X(this,e,Lt,Pt,B,{text:0,deep:1})}}function qe(n){let e,t,r=n[2].contents+"",i,a=[n[2].attrs,{style:i="width: "+n[0]+"; height: "+n[1]+"; transform: rotate("+n[3]+"deg);"}],s={};for(let o=0;o<a.length;o+=1)s=rt(s,a[o]);return{c(){e=ze("svg"),t=ze("g"),this.h()},l(o){e=Ae(o,"svg",{style:!0});var l=M(e);t=Ae(l,"g",{});var h=M(t);h.forEach(p),l.forEach(p),this.h()},h(){Ee(e,s),Y(e,"svelte-x4av39",!0)},m(o,l){S(o,e,l),m(e,t),t.innerHTML=r},p(o,l){l&4&&r!==(r=o[2].contents+"")&&(t.innerHTML=r),Ee(e,s=nt(a,[l&4&&o[2].attrs,l&11&&i!==(i="width: "+o[0]+"; height: "+o[1]+"; transform: rotate("+o[3]+"deg);")&&{style:i}])),Y(e,"svelte-x4av39",!0)},d(o){o&&p(e)}}}function qt(n){let e,t=n[2]&&qe(n);return{c(){t&&t.c(),e=ie()},l(r){t&&t.l(r),e=ie()},m(r,i){t&&t.m(r,i),S(r,e,i)},p(r,[i]){r[2]?t?t.p(r,i):(t=qe(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:D,o:D,d(r){t&&t.d(r),r&&p(e)}}}function Ft(n,e,t){let r,i;const a=["n","ne","e","se","s","sw","w","nw"];let{name:s}=e,{direction:o="n"}=e,{width:l="1em"}=e,{height:h="1em"}=e,{stroke:c=void 0}=e,{strokeWidth:u=void 0}=e;return n.$$set=f=>{"name"in f&&t(5,s=f.name),"direction"in f&&t(6,o=f.direction),"width"in f&&t(0,l=f.width),"height"in f&&t(1,h=f.height),"stroke"in f&&t(7,c=f.stroke),"strokeWidth"in f&&t(8,u=f.strokeWidth)},n.$$.update=()=>{n.$$.dirty&32&&t(2,r=at.icons[s]),n.$$.dirty&64&&t(3,i=a.indexOf(o)*45),n.$$.dirty&388&&r&&(c&&t(2,r.attrs.stroke=c,r),u&&t(2,r.attrs["stroke-width"]=u,r))},[l,h,r,i,a,s,o,c,u]}class Ct extends V{constructor(e){super();X(this,e,Ft,qt,B,{directions:4,name:5,direction:6,width:0,height:1,stroke:7,strokeWidth:8})}get directions(){return this.$$.ctx[4]}}function Fe(n,e,t){const r=n.slice();return r[18]=e[t],r}function Ce(n){let e,t,r;return t=new Ct({props:{name:"chevron-"+n[18],stroke:n[5],strokeWidth:n[6]}}),{c(){e=g("span"),J(t.$$.fragment),this.h()},l(i){e=y(i,"SPAN",{style:!0,class:!0});var a=M(e);Q(t.$$.fragment,a),a.forEach(p),this.h()},h(){ae(e,"font-size",n[4]),d(e,"class","svelte-18ope9k")},m(i,a){S(i,e,a),Z(t,e,null),r=!0},p(i,a){const s={};a&8&&(s.name="chevron-"+i[18]),a&32&&(s.stroke=i[5]),a&64&&(s.strokeWidth=i[6]),t.$set(s),(!r||a&16)&&ae(e,"font-size",i[4])},i(i){r||(R(t.$$.fragment,i),r=!0)},o(i){P(t.$$.fragment,i),r=!1},d(i){i&&p(e),$(t)}}}function je(n){let e,t=n[9].includes(n[18]),r,i,a,s,o,l,h,c=t&&Ce(n);return{c(){e=g("button"),c&&c.c(),r=K(),this.h()},l(u){e=y(u,"BUTTON",{style:!0,"aria-label":!0,class:!0});var f=M(e);c&&c.l(f),r=O(f),f.forEach(p),this.h()},h(){ae(e,"width",n[12](n[18])),ae(e,"height",n[11](n[18])),d(e,"aria-label",i=n[18]),d(e,"class",a=""+(n[18]+" "+n[7]+" svelte-18ope9k")),e.disabled=s=n[2].includes(n[18]),Y(e,"full",n[1])},m(u,f){S(u,e,f),c&&c.m(e,null),m(e,r),o=!0,l||(h=oe(e,"click",function(){Te(n[13]("tap",n[18]))&&n[13]("tap",n[18]).apply(this,arguments)}),l=!0)},p(u,f){n=u,f&520&&(t=n[9].includes(n[18])),t?c?(c.p(n,f),f&520&&R(c,1)):(c=Ce(n),c.c(),R(c,1),c.m(e,r)):c&&(ce(),P(c,1,1,()=>{c=null}),de()),(!o||f&4104)&&ae(e,"width",n[12](n[18])),(!o||f&2056)&&ae(e,"height",n[11](n[18])),(!o||f&8&&i!==(i=n[18]))&&d(e,"aria-label",i),(!o||f&136&&a!==(a=""+(n[18]+" "+n[7]+" svelte-18ope9k")))&&d(e,"class",a),(!o||f&12&&s!==(s=n[2].includes(n[18])))&&(e.disabled=s),f&138&&Y(e,"full",n[1])},i(u){o||(R(c),o=!0)},o(u){P(c),o=!1},d(u){u&&p(e),c&&c.d(),l=!1,h()}}}function jt(n){let e,t,r,i;ke(n[17]);let a=n[3],s=[];for(let l=0;l<a.length;l+=1)s[l]=je(Fe(n,a,l));const o=l=>P(s[l],1,1,()=>{s[l]=null});return{c(){e=g("section");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){e=y(l,"SECTION",{style:!0,class:!0});var h=M(e);for(let c=0;c<s.length;c+=1)s[c].l(h);h.forEach(p),this.h()},h(){ae(e,"height",n[8]+"px"),d(e,"class","svelte-18ope9k"),Y(e,"debug",n[0])},m(l,h){S(l,e,h);for(let c=0;c<s.length;c+=1)s[c].m(e,null);t=!0,r||(i=[oe(window,"keydown",function(){Te(n[10])&&n[10].apply(this,arguments)}),oe(window,"resize",n[17])],r=!0)},p(l,[h]){if(n=l,h&15102){a=n[3];let c;for(c=0;c<a.length;c+=1){const u=Fe(n,a,c);s[c]?(s[c].p(u,h),R(s[c],1)):(s[c]=je(u),s[c].c(),R(s[c],1),s[c].m(e,null))}for(ce(),c=a.length;c<s.length;c+=1)o(c);de()}(!t||h&256)&&ae(e,"height",n[8]+"px"),h&1&&Y(e,"debug",n[0])},i(l){if(!t){for(let h=0;h<a.length;h+=1)R(s[h]);t=!0}},o(l){s=s.filter(Boolean);for(let h=0;h<s.length;h+=1)P(s[h]);t=!1},d(l){l&&p(e),fe(s,l),r=!1,st(i)}}}function Nt(n,e,t){let r,i,a,s,{debug:o=!1}=e,{enableKeyboard:l=!1}=e,{full:h=!1}=e,{showArrows:c=!1}=e,{disable:u=[]}=e,{directions:f=["left","right"]}=e,{size:v="64px"}=e,{arrowSize:E="48px"}=e,{arrowStroke:T="#000"}=e,{arrowStrokeWidth:I="2"}=e,{arrowPosition:b="center"}=e;const _=it();let A;function z(){t(8,A=window.innerHeight)}return n.$$set=w=>{"debug"in w&&t(0,o=w.debug),"enableKeyboard"in w&&t(14,l=w.enableKeyboard),"full"in w&&t(1,h=w.full),"showArrows"in w&&t(15,c=w.showArrows),"disable"in w&&t(2,u=w.disable),"directions"in w&&t(3,f=w.directions),"size"in w&&t(16,v=w.size),"arrowSize"in w&&t(4,E=w.arrowSize),"arrowStroke"in w&&t(5,T=w.arrowStroke),"arrowStrokeWidth"in w&&t(6,I=w.arrowStrokeWidth),"arrowPosition"in w&&t(7,b=w.arrowPosition)},n.$$.update=()=>{n.$$.dirty&65538&&t(12,r=w=>["left","right"].includes(w)?v:h?"100%":v),n.$$.dirty&65538&&t(11,i=w=>["up","down"].includes(w)?v:h?"100%":v),n.$$.dirty&16392&&t(10,a=w=>{const L=w.key.replace("Arrow","").toLowerCase(),N=f.includes(L);l&&N&&(w.preventDefault(),_("tap",L))}),n.$$.dirty&32776&&t(9,s=f.filter(w=>typeof c=="boolean"?c:c.includes(w)))},[o,h,u,f,E,T,I,b,A,s,a,i,r,_,l,c,v,z]}class Ut extends V{constructor(e){super();X(this,e,Nt,jt,B,{debug:0,enableKeyboard:14,full:1,showArrows:15,disable:2,directions:3,size:16,arrowSize:4,arrowStroke:5,arrowStrokeWidth:6,arrowPosition:7})}}var Ht=[{id:"byline",sprite:"russell",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"walk",loop:"",duration:"3000",start_x:"-2",end_x:"2",start_y:"",end_y:"",start_r:"",end_r:"",z:"",flip:""},{id:"byline",sprite:"russell",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"",loop:"",duration:"",start_x:"2",end_x:"2",start_y:"",end_y:"",start_r:"",end_r:"",z:"",flip:""},{id:"byline",sprite:"michelle",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"",loop:"",duration:"",start_x:"11",end_x:"11",start_y:"",end_y:"",start_r:"",end_r:"",z:"",flip:"TRUE"},{id:"eat",sprite:"russell",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"walk",loop:"",duration:"",start_x:"2",end_x:"2",start_y:"",end_y:"",start_r:"",end_r:"",z:"",flip:""},{id:"eat",sprite:"burger",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"",loop:"TRUE",duration:"5000",start_x:"11",end_x:"-2",start_y:"3",end_y:"3",start_r:"",end_r:"",z:"",flip:""},{id:"daughter",sprite:"russell",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"walk",loop:"",duration:"3000",start_x:"2",end_x:"7",start_y:"",end_y:"",start_r:"",end_r:"",z:"2",flip:""},{id:"daughter",sprite:"russell",appear:"",enter:"",exit:"",delay:"1000",once:"",cycle:"walk-baby",loop:"",duration:"3000",start_x:"7",end_x:"2",start_y:"",end_y:"",start_r:"",end_r:"",z:"2",flip:"TRUE"},{id:"daughter",sprite:"russell",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"idle-baby",loop:"",duration:"",start_x:"2",end_x:"2",start_y:"",end_y:"",start_r:"",end_r:"",z:"2",flip:""},{id:"daughter",sprite:"hospital-left",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"",loop:"",duration:"",start_x:"5",end_x:"5",start_y:"",end_y:"",start_r:"",end_r:"",z:"1",flip:""},{id:"daughter",sprite:"hospital-left",appear:"",enter:"",exit:"",delay:"1200",once:"TRUE",cycle:"slide",loop:"",duration:"",start_x:"5",end_x:"5",start_y:"",end_y:"",start_r:"",end_r:"",z:"1",flip:""},{id:"daughter",sprite:"hospital-right",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"",loop:"",duration:"",start_x:"5",end_x:"5",start_y:"",end_y:"",start_r:"",end_r:"",z:"3",flip:""},{id:"solid",sprite:"russell",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"idle-baby",loop:"",duration:"",start_x:"2",end_x:"2",start_y:"",end_y:"",start_r:"",end_r:"",z:"",flip:""},{id:"solid",sprite:"peanut",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"",loop:"",duration:"1200",start_x:"-1",end_x:"1",start_y:"",end_y:"",start_r:"",end_r:"",z:"",flip:""},{id:"test",sprite:"russell",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"walk-baby",loop:"",duration:"3000",start_x:"2",end_x:"7",start_y:"",end_y:"",start_r:"",end_r:"",z:"2",flip:""},{id:"test",sprite:"russell",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"walk-baby",loop:"",duration:"3000",start_x:"7",end_x:"2",start_y:"",end_y:"",start_r:"",end_r:"",z:"2",flip:"TRUE"},{id:"test",sprite:"russell",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"idle-baby",loop:"",duration:"",start_x:"2",end_x:"3",start_y:"",end_y:"",start_r:"",end_r:"",z:"2",flip:""},{id:"test",sprite:"peanut",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"",loop:"",duration:"",start_x:"1",end_x:"1",start_y:"",end_y:"",start_r:"",end_r:"",z:"",flip:""},{id:"test",sprite:"hospital-left",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"",loop:"",duration:"",start_x:"5",end_x:"5",start_y:"",end_y:"",start_r:"",end_r:"",z:"1",flip:""},{id:"test",sprite:"hospital-left",appear:"",enter:"",exit:"",delay:"1200",once:"TRUE",cycle:"slide",loop:"",duration:"",start_x:"5",end_x:"5",start_y:"",end_y:"",start_r:"",end_r:"",z:"1",flip:""},{id:"test",sprite:"hospital-right",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"",loop:"",duration:"",start_x:"5",end_x:"5",start_y:"",end_y:"",start_r:"",end_r:"",z:"3",flip:""},{id:"test",sprite:"cashew",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"",loop:"",duration:"",start_x:"8",end_x:"8",start_y:"",end_y:"",start_r:"",end_r:"",z:"2",flip:""},{id:"test",sprite:"cashew",appear:"",enter:"",exit:"",delay:"3600",once:"",cycle:"",loop:"",duration:"2400",start_x:"8",end_x:"4",start_y:"",end_y:"",start_r:"",end_r:"",z:"2",flip:""},{id:"test",sprite:"sesame",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"",loop:"",duration:"",start_x:"8",end_x:"8",start_y:"",end_y:"",start_r:"",end_r:"",z:"2",flip:""},{id:"test",sprite:"sesame",appear:"",enter:"",exit:"",delay:"4800",once:"",cycle:"",loop:"",duration:"1800",start_x:"8",end_x:"5",start_y:"",end_y:"",start_r:"",end_r:"",z:"2",flip:""},{id:"surprise",sprite:"russell",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"walk-baby",loop:"",duration:"6400",start_x:"2",end_x:"11",start_y:"",end_y:"",start_r:"",end_r:"",z:"",flip:""},{id:"surprise",sprite:"russell",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"",loop:"",duration:"",start_x:"11",end_x:"11",start_y:"",end_y:"",start_r:"",end_r:"",z:"",flip:""},{id:"doctor",sprite:"russell",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"walk",loop:"",duration:"1800",start_x:"-2",end_x:"1",start_y:"",end_y:"",start_r:"",end_r:"",z:"",flip:""},{id:"doctor",sprite:"russell",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"",loop:"",duration:"",start_x:"1",end_x:"1",start_y:"",end_y:"",start_r:"",end_r:"",z:"",flip:""},{id:"doctor",sprite:"chalkboard",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"",loop:"",duration:"",start_x:"4",end_x:"4",start_y:"1",end_y:"1",start_r:"",end_r:"",z:"",flip:""},{id:"doctor",sprite:"desk",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"",loop:"",duration:"",start_x:"5",end_x:"5",start_y:"",end_y:"",start_r:"",end_r:"",z:"",flip:""},{id:"doctor",sprite:"gupta",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"",loop:"",duration:"",start_x:"7",end_x:"7",start_y:"",end_y:"",start_r:"",end_r:"",z:"",flip:""},{id:"million",sprite:"pictogram",appear:"",enter:"",exit:"",delay:"",once:"",cycle:"",loop:"",duration:"",start_x:"1",end_x:"1",start_y:"",end_y:"",start_r:"",end_r:"",z:"",flip:""}];const Kt=Ht.map(n=>be(he({},n),{duration:n.duration===""?void 0:+n.duration,delay:+n.delay,start_x:+n.start_x,end_x:+n.end_x,start_y:+n.start_y,end_y:+n.end_y,start_r:+n.start_r,end_y:+n.end_y,flip:!!n.flip,loop:!!n.loop,once:!!n.once,z:+n.z}));var Ot=[{id:"burger",size:32,frames:[{index:0,x:0,y:0}]},{id:"cashew",size:32,frames:[{index:0,x:0,y:0}]},{id:"chalkboard",size:128,frames:[{index:0,x:0,y:0}]},{id:"daughter",size:32,frames:[{index:0,x:0,y:0}]},{id:"desk",size:64,frames:[{index:0,x:0,y:0}]},{id:"falcpa",size:128,frames:[{index:0,x:0,y:0}]},{id:"gupta",size:64,frames:[{index:0,x:0,y:0}]},{id:"hospital-left",size:128,frames:[{index:0,x:0,y:0},{index:1,x:128,y:0,name:"slide"},{index:2,x:256,y:0,name:"slide"},{index:3,x:384,y:0,name:"slide"},{index:4,x:512,y:0,name:"slide"},{index:5,x:640,y:0,name:"slide"}]},{id:"hospital-right",size:128,frames:[{index:0,x:0,y:0}]},{id:"hospital",size:160,frames:[{index:0,x:0,y:0}]},{id:"michelle",size:64,frames:[{index:0,x:0,y:0},{index:1,x:64,y:0,name:"walk"},{index:2,x:128,y:0,name:"walk"},{index:3,x:192,y:0,name:"walk"},{index:4,x:256,y:0,name:"walk"},{index:5,x:320,y:0,name:"walk"},{index:6,x:384,y:0,name:"walk"},{index:7,x:448,y:0,name:"walk"},{index:8,x:512,y:0,name:"walk"}]},{id:"pal",size:128,frames:[{index:0,x:0,y:0}]},{id:"peanut",size:32,frames:[{index:0,x:0,y:0}]},{id:"pictogram",size:256,frames:[{index:0,x:0,y:0}]},{id:"pile",size:128,frames:[{index:0,x:0,y:0}]},{id:"russell",size:64,frames:[{index:0,x:0,y:0},{index:1,x:64,y:0,name:"walk"},{index:2,x:128,y:0,name:"walk"},{index:3,x:192,y:0,name:"walk"},{index:4,x:256,y:0,name:"walk"},{index:5,x:320,y:0,name:"walk"},{index:6,x:384,y:0,name:"walk"},{index:7,x:448,y:0,name:"walk"},{index:8,x:512,y:0,name:"walk"},{index:9,x:576,y:0,name:"idle-baby"},{index:10,x:640,y:0,name:"walk-baby"},{index:11,x:704,y:0,name:"walk-baby"},{index:12,x:768,y:0,name:"walk-baby"},{index:13,x:832,y:0,name:"walk-baby"},{index:14,x:896,y:0,name:"walk-baby"},{index:15,x:960,y:0,name:"walk-baby"},{index:16,x:1024,y:0,name:"walk-baby"},{index:17,x:1088,y:0,name:"walk-baby"}]},{id:"sesame",size:32,frames:[{index:0,x:0,y:0}]},{id:"top",size:128,frames:[{index:0,x:0,y:0}]},{id:"watercooler",size:64,frames:[{index:0,x:0,y:0}]}];function Ne(n,e,t){const r=n.slice();return r[17]=e[t][0],r[18]=e[t][1],r}function Ue(n,e){let t,r,i;return r=new Dt({props:{id:e[1],name:e[17],steps:e[18],data:e[9](e[17])}}),{key:n,first:null,c(){t=ie(),J(r.$$.fragment),this.h()},l(a){t=ie(),Q(r.$$.fragment,a),this.h()},h(){this.first=t},m(a,s){S(a,t,s),Z(r,a,s),i=!0},p(a,s){e=a;const o={};s&2&&(o.id=e[1]),s&16&&(o.name=e[17]),s&16&&(o.steps=e[18]),s&16&&(o.data=e[9](e[17])),r.$set(o)},i(a){i||(R(r.$$.fragment,a),i=!0)},o(a){P(r.$$.fragment,a),i=!1},d(a){a&&p(t),$(r,a)}}}function Bt(n){let e,t,r,i,a,s,o,l=[],h=new Map,c,u,f,v,E,T=n[4];const I=b=>b[17];for(let b=0;b<T.length;b+=1){let _=Ne(n,T,b),A=I(_);h.set(A,l[b]=Ue(A,_))}return u=new Wt({props:{text:n[6],deep:n[5]}}),v=new Ut({props:{debug:!1,full:!0,enableKeyboard:!0,size:"50%"}}),v.$on("tap",n[8]),{c(){e=g("div"),t=g("p"),r=te("(scale: "),i=te(n[2]),a=te(")"),s=K(),o=g("div");for(let b=0;b<l.length;b+=1)l[b].c();c=K(),J(u.$$.fragment),f=K(),J(v.$$.fragment),this.h()},l(b){e=y(b,"DIV",{id:!0,class:!0});var _=M(e);t=y(_,"P",{class:!0});var A=M(t);r=ne(A,"(scale: "),i=ne(A,n[2]),a=ne(A,")"),A.forEach(p),s=O(_),o=y(_,"DIV",{class:!0,style:!0});var z=M(o);for(let w=0;w<l.length;w+=1)l[w].l(z);z.forEach(p),c=O(_),Q(u.$$.fragment,_),f=O(_),Q(v.$$.fragment,_),_.forEach(p),this.h()},h(){d(t,"class","svelte-18oozq2"),d(o,"class","stage svelte-18oozq2"),d(o,"style",n[3]),d(e,"id","game"),d(e,"class","svelte-18oozq2"),Y(e,"visible",n[0])},m(b,_){S(b,e,_),m(e,t),m(t,r),m(t,i),m(t,a),m(e,s),m(e,o);for(let A=0;A<l.length;A+=1)l[A].m(o,null);m(e,c),Z(u,e,null),m(e,f),Z(v,e,null),E=!0},p(b,[_]){(!E||_&4)&&le(i,b[2]),_&530&&(T=b[4],ce(),l=lt(l,_,I,1,b,T,h,o,ct,Ue,null,Ne),de()),(!E||_&8)&&d(o,"style",b[3]);const A={};_&64&&(A.text=b[6]),_&32&&(A.deep=b[5]),u.$set(A),_&1&&Y(e,"visible",b[0])},i(b){if(!E){for(let _=0;_<T.length;_+=1)R(l[_]);R(u.$$.fragment,b),R(v.$$.fragment,b),E=!0}},o(b){for(let _=0;_<l.length;_+=1)P(l[_]);P(u.$$.fragment,b),P(v.$$.fragment,b),E=!1},d(b){b&&p(e);for(let _=0;_<l.length;_+=1)l[_].d();$(u),$(v)}}}const _e=10,Gt=4,ue=32,Vt=4;function Xt(n,e,t){let r,i,a,s,o,l,h,c,u;me(n,Tt,z=>t(13,u=z));const{copy:f}=pe("App");let{visible:v}=e;const E=ue*_e;let T=0,I=dt();me(n,I,z=>t(2,c=z));const b=[].concat(...f.scenes.map(z=>z.beats)),_=({detail:z})=>{const L=T+(z==="right"?1:-1);t(10,T=Math.min(Math.max(0,L),b.length-1))},A=z=>Ot.find(w=>w.id===z);return n.$$set=z=>{"visible"in z&&t(0,v=z.visible)},n.$$.update=()=>{n.$$.dirty&8192&&I.set(Math.min(Vt,u.width*.9/E)),n.$$.dirty&8196&&t(11,r=Math.ceil((u.width-c*ue*_e)/2)),n.$$.dirty&1024&&t(1,i=b[T].id),n.$$.dirty&1024&&t(6,a=b[T].text),n.$$.dirty&1024&&t(5,s=b[T].deep),n.$$.dirty&2&&t(12,o=Kt.filter(z=>z.id===i)),n.$$.dirty&4096&&t(4,l=ot(o,z=>z.sprite)),n.$$.dirty&2052&&t(3,h=`--scale: ${c}; --margin: ${r}px; --unitsX: ${_e}; --unitsY: ${Gt}; --base: ${ue}px;`)},Me("Game",{scale:I,BASE:ue}),[v,i,c,h,l,s,a,I,_,A,T,r,o,u]}class Yt extends V{constructor(e){super();X(this,e,Xt,Bt,B,{visible:0})}}const Jt=[{scene:"intro",beats:[{id:"title",text:"The Hidden Layers of Sesame Allergies",hide:"true"},{id:"byline",text:"By Russell Goldenberg and Michelle McGhee",hide:"true",cue:"Russell walks in and stops in the center, Michelle leans in offscreen, waves"}]},{scene:"discovery",beats:[{id:"eat",text:"I don\u2019t have food allergies. I never gave them much thought, eating whatever I wanted.",cue:"Russell walks to center, infinite walking, food flying by, some of it is eaten",art:"walk cycle (stretch: eating animation), assortment of foods (stretch: w/ wings flapping)"},{id:"daughter",text:"Then I had my daughter.",cue:"hospital appears, doors animate open (or just empty space), Russell walks into hospital, then comes out walking with a baby in opposite direction, hospital fades out",art:"hospital, Russell holding/carrying baby w/ walk cycle"},{id:"solid",text:"After introducing solid foods at six months, I learned she was allergic to peanuts.",cue:"Russell holds baby in air, reuse flying foods (or baby in high chair). Anthropomorphic mean peanut walks in, dancing or something",art:"holding/eating cycle (or high chair), peanut"},{id:"test",text:"She got tested: tree nuts and sesame were added to the list.",cue:"walk into hospital again which reappears, other allergens appear and dance with peanut",art:"tree nut twins, sesame,",deep:"Technically the tree nuts she is allergic to are cashews and pistachios. And technically, they aren\u2019t even nuts, but seeds! Although tree nuts are lumped into a single category, they are made up of cashews, pistachios, walnuts, ...add rest."},{id:"surprise",text:"I knew peanuts and tree nuts were common, but sesame surprised me. It was time to learn about food allergies.",cue:"everything disappears except Russell",art:""}]},{scene:"education",beats:[{id:"doctor",text:"This is Dr. Ruchi Gupta. She literally wrote <a href=https://foodwithoutfearbook.com/>the book</a> on food allergies. Here is what I learned:",alt:"I read Dr. Ruchi Gupta\u2019s recent book <a href=https://foodwithoutfearbook.com/>Food Without Fear</a>. Here are just a couple highlights:",cue:"Gupta writing on chalkboard, Russell walks to new spot",art:"Gupta cycle, desk with books and apple, chalkboard"},{id:"million",text:"About 32 million Americans have food allergies, or 1 in 10 adults and 1 in 13 children.",cue:"zoomed in chalkboard appears full screen",art:"pictogram of stats (stretch: animate in by person)"},{id:"top",text:"Food allergies are on the rise in recent decades. Sesame is now the ninth top allergen in the US, yet not required to be labeled by law under <a href=https://www.fda.gov/food/food-allergensgluten-free-guidance-documents-regulatory-information/food-allergen-labeling-and-consumer-protection-act-2004-questions-and-answers>FALCPA</a> until 2023.",cue:"% from 2019 survey in adults ranking top eight by percent",art:"bar chart (stretch: animate in by bar)"},{id:"falcpa",text:"FALCPA stands for the <strong>F</strong>ood <strong>A</strong>llergen <strong>L</strong>abeling <strong>A</strong>nd <strong>C</strong>onsumer <strong>P</strong>rotection <strong>A</strong>ct of 2004.",cue:"the FDA \u201Crequires that the label of a food that contains an ingredient that is or contains protein from a \u2018major food allergen\u2019 declare the presence of the allergen in the manner described by the law.\u201D",alt:"FALCPA stands for the F</strong>ood <strong>A</strong>llergen <strong>L</strong>abeling <strong>A</strong>nd <strong>C</strong>onsumer <strong>P</strong>rotection <strong>A</strong>ct of 2004. The FDA \u201Crequires that the label of a food that contains an ingredient that is or contains protein from a \u2018major food allergen\u2019 declare the presence of the allergen in the manner described by the law.\u201D",art:"text quote (stretch: animates in by word)"},{id:"pal",text:"FALCPA is a great start, but it can be better. For example, precautionary allergen labeling (PAL), like \u201Cmay contain peanuts,\u201D is actually voluntary and unregulated, leaving room for consumer interpretation.",cue:"survey results visualize + examples",art:"table"}]},{scene:"experiment",beats:[{id:"share",text:"Michelle has food allergies too. We shared our experiences and talked about all the stresses that come with them, whether it is eating out or grocery shopping.",cue:"chalkboard goes away, then everything else, Michelle walks in next to Russell, watercooler appears. evil peanut returns.",art:"Michelle walk cycle, watercooler (stretch: bubbling)"},{id:"label",text:"We discussed the complexities of food labeling, and how there are even hidden ways sesame can end up in a product, like being in a generic ingredient such as \u201Cspices,\u201D or from cross-contact on shared equipment.",deep:"Explain all the ways. labeled, different name (tahini), flavors, cross-contact/shared facility. Also a Canadian study found that 17% of accidental exposures came from unlabeled ingredients.",cue:"TBD",art:"TBD"},{id:"experiment",text:"We decided to run an experiment on the presently unregulated labeling practices of sesame. Our goal: explore data to shine some light on an aspect of life that may seem trivial to most, but stressful to many.",cue:"Michelle and Russell now wearing goggles, one holding test tubes, one holding calculator",art:"animation of lab equipment cycles (Russell pouring test tube into beaker, Michelle punching calculator)"}]},{scene:"store",beats:[{id:"grocery",text:"Like everyone, we have to shop for groceries every week. Knowing that each decision has potentially life-threatening consequences can elevate anxiety and precaution around this mundane activity.",cue:"Michelle walks off screen, Daughter walks on screen next to Russell.",art:"Daughter walk cycle"},{id:"cracker",text:"We focused our research on crackers; a snacking staple that can often have sesame seeds.",cue:"tk"},{id:"popular",text:"We picked the 100 most popular crackers from each of two massive grocery chains, Albertsons (conventional) and Whole Foods (natural). Albertsons operates the likes of Safeway, Jewel-Osco, Vons, Acme, Shaw\u2019s, and others.",cue:"pile of crackers appears",art:"cracker pile"},{id:"mission",text:"Our mission: find how confident we could be when deciding to purchase each cracker. Did the product\u2019s labeling practices make our lives easier or more stressful?",cue:"pile of crackers get checks or Xs (or red/green)",art:"cracker cycle"},{id:"data",text:"We compiled all the ingredients for the 200 crackers across 42 brands, and contacted them (via websites, emails, and phone calls) to get details about their approaches to labeling and manufacturing practices.",deep:"We first tried looking at a manufacturer's website, some have great FAQ pages. Then we tried emailing or filling out a contact form. Lastly we tried calling their customer support.",cue:"crackers disappear, Russell and Daughter infinite walk cycle through shelves of crackers that appear",art:"shelves (fade edges CSS for infinite loop)"},{id:"one",text:"We split the results into two groups. In group one, we are confident to make a decision based on the label. 61% of crackers are in this group. Of those, one in five we simply avoid because sesame is an ingredient.",cue:"crackers stop moving, full 200 appear, just tier one appears",art:"shelf of 200, cycle to X",deep:"It is recommended to always read a label every time you purchase a product because ingredients can change! Most mainstream products still don\u2019t consider sesame a top allergen, so we didn\u2019t encounter any that claimed to be made in a sesame-free facility, though they do exist."},{id:"oneb",text:"For the rest, we feel it is safe to purchase, either because they run a sesame-free facility, or we know how it will be labeled, or we trust their manufacturing practices."},{id:"two",text:"39% fall into group two. We have no confidence in the brand and stay away. In X% of these, we received unclear responses to our inquiries, or they didn\u2019t have the knowledge or satisfactory responses.",cue:"tier one disappears, tier two appears",art:"shelf of X",deep:"Manufacturers can change up their processing or facilities so it is good to check in regularly."},{id:"twob",text:"For the remaining X% it was even more concerning because there was no accessible information on their label or websites, and we were unable to contact them or didn\u2019t hear back."}]},{scene:"end",beats:[{id:"reaction",text:"Although confidence in 61% gives us a good number of approachable crackers, we were disappointed by the wide range of approaches to labeling and manufacturing, and how challenging it was to often get this information.",cue:"TBD",art:""},{id:"law",text:"Until labeling laws improve, it's no wonder some people just choose to avoid products altogether that aren't explicitly made in allergen-free facilities."},{id:"where",text:"Where do we go from here? For starters, <strong>you</strong> can help convince lawmakers to make labeling better for everyone by supporting <a href=https://www.change.org/p/strengthen-the-food-labeling-modernization-act-to-protect-the-allergic-community/>this petition</a>.",cue:"shelves disappear, all characters walk on (like a curtain call)"},{id:"learn",text:"Some notes on data and methods\u2026 (date of collection, source sites, etc)"},{id:"disclaimer",text:"Although we\u2019d like to share the data as a resource for others, we think this is a disservice to the community. Not only is it out of date as of publishing the story, but it is always recommended to read the labels for yourself every time and stay up to date with brands as manufacturing practices can change,"},{id:"contact",text:"For comments or questions get in touch at sup@pudding.cool. Or read more stories on <a href=https://pudding.cool>The Pudding</a>!"}]}];var Qt={scenes:Jt};function Zt(n){let e,t,r,i,a,s,o,l;e=new Et({props:{visible:n[1]}}),r=new Yt({props:{visible:!n[1]}});function h(u){n[2](u)}let c={label:"Text Version"};return n[0]!==void 0&&(c.value=n[0]),s=new wt({props:c}),ut.push(()=>ht(s,"value",h)),{c(){J(e.$$.fragment),t=K(),J(r.$$.fragment),i=K(),a=g("div"),J(s.$$.fragment),this.h()},l(u){Q(e.$$.fragment,u),t=O(u),Q(r.$$.fragment,u),i=O(u),a=y(u,"DIV",{class:!0});var f=M(a);Q(s.$$.fragment,f),f.forEach(p),this.h()},h(){d(a,"class","toggle svelte-akucs1")},m(u,f){Z(e,u,f),S(u,t,f),Z(r,u,f),S(u,i,f),S(u,a,f),Z(s,a,null),l=!0},p(u,[f]){const v={};f&2&&(v.visible=u[1]),e.$set(v);const E={};f&2&&(E.visible=!u[1]),r.$set(E);const T={};!o&&f&1&&(o=!0,T.value=u[0],ft(()=>o=!1)),s.$set(T)},i(u){l||(R(e.$$.fragment,u),R(r.$$.fragment,u),R(s.$$.fragment,u),l=!0)},o(u){P(e.$$.fragment,u),P(r.$$.fragment,u),P(s.$$.fragment,u),l=!1},d(u){$(e,u),u&&p(t),$(r,u),u&&p(i),u&&p(a),$(s)}}}function $t(n,e,t){let r;Me("App",{copy:Qt});let i="off";function a(s){i=s,t(0,i)}return n.$$.update=()=>{n.$$.dirty&1&&t(1,r=i==="on")},[i,r,a]}class en extends V{constructor(e){super();X(this,e,$t,Zt,B,{})}}function tn(n){let e,t,r,i;return e=new gt({}),r=new en({}),{c(){J(e.$$.fragment),t=K(),J(r.$$.fragment)},l(a){Q(e.$$.fragment,a),t=O(a),Q(r.$$.fragment,a)},m(a,s){Z(e,a,s),S(a,t,s),Z(r,a,s),i=!0},p:D,i(a){i||(R(e.$$.fragment,a),R(r.$$.fragment,a),i=!0)},o(a){P(e.$$.fragment,a),P(r.$$.fragment,a),i=!1},d(a){$(e,a),a&&p(t),$(r,a)}}}const sn=!0;class ln extends V{constructor(e){super();X(this,e,null,tn,B,{})}}export{ln as default,sn as prerender};
